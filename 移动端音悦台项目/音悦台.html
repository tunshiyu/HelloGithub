<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/index.css" />
	</head>

	<body>
		<!--模拟屏幕-->
		<div id="wrap">
			<!--头部-->
			<section id="head">
				<!--上半部分-->
				<div class="headTop">
					<!--logo-->
					<h1 class="logo">
						<a href="javascript:;"><img src="img/logo.png"/></a>
					</h1>
					<!--MenuBtn-->
					<a href="javascript:;" class="menuBtn close"></a>
					<!--btns-->
					<div class="btns">
						<a href="javascript:;" class="searchBtn">搜索</a>
						<a href="javascript:;">登录</a>
						<a href="javascript:;">注册</a>

					</div>
				</div>
				<!--下半部分-->
				<form class="search">
					<input type="text" placeholder="请输入搜索内容。。" />
					<input type="submit" value="搜索" />
				</form>
				<!--遮罩层-->
				<ul class="mask">
					<li>
						<a href="javascript:;">首页</a>
					</li>
					<li>
						<a href="javascript:;">MV</a>
					</li>
					<li>
						<a href="javascript:;">悦单</a>
					</li>
					<li>
						<a href="javascript:;">V榜</a>
					</li>
					<li>
						<a href="javascript:;">音悦</a>
					</li>
					<li>
						<a href="javascript:;">商城</a>
					</li>
					<li>
						<a href="javascript:;">节目</a>
					</li>
					<li>
						<a href="javascript:;">饭团</a>
					</li>
					<li>
						<a href="javascript:;">资讯</a>
					</li>
					<li>
						<a href="javascript:;">我的家</a>
					</li>
					<li>
						<a href="javascript:;">APP下载</a>
					</li>
					<li>
						<a href="javascript:;">热门应用</a>
					</li>
				</ul>

			</section>

			<!--内容-->
			<div id="contentWrap">
				
			
			<div id="content">
				<!--nav-->
				<nav class="navWrap">
					<ul class="navList">
						<li class="active">
							<a href="javascript:;">首页</a>
						</li>
						<li>
							<a href="javascript:;">MV</a>
						</li>
						<li>
							<a href="javascript:;">悦单</a>
						</li>
						<li>
							<a href="javascript:;">V榜</a>
						</li>
						<li>
							<a href="javascript:;">音悦</a>
						</li>
						<li>
							<a href="javascript:;">商城</a>
						</li>
						<li>
							<a href="javascript:;">节目</a>
						</li>
						<li>
							<a href="javascript:;">饭团</a>
						</li>
						<li>
							<a href="javascript:;">资讯</a>
						</li>
						<li>
							<a href="javascript:;">我的家</a>
						</li>
						<li>
							<a href="javascript:;">APP下载</a>
						</li>
						<li>
							<a href="javascript:;">热门应用</a>
						</li>
					</ul>
				</nav>

				<!--无缝-->
				<div class="banWrap">
					<ul class="banList">
						<li>
							<a href="javascript:;">
								<img src="img/1.jpg" />
							</a>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/2.jpg" />
							</a>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/3.jpg" />
							</a>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/4.jpg" />
							</a>
						</li>
						<li>
							<a href="javascript:;">
								<img src="img/5.jpg" />
							</a>
						</li>
					</ul>
					<!--小圆点-->
					<div class="banIcons">
						<span class="active"></span>
						<span></span>
						<span></span>
						<span></span>
						<span></span>
					</div>
				</div>
				<!--tab-->
				<div class="tab">
					<!--tab头-->
					<div class="tabHead">
						<span>MV首播</span>
						<a href="javascript:;">更多&gt;</a>
					</div>
					<!--tabNav-->
					<div class="tabNav">
						<span class="smallGreen"></span>
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>

					</div>

					<!--tabWrap-->
					<div class="tabWrap">
						<ul class="tabLoding"></ul>
						<!--tabList-->
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>

						</ul>
						<ul class="tabLoding"></ul>
					</div>

				</div>

				<div class="tab">
					<!--tab头-->
					<div class="tabHead">
						<span>MV首播</span>
						<a href="javascript:;">更多&gt;</a>
					</div>
					<!--tabNav-->
					<div class="tabNav">
						<span class="smallGreen"></span>
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>

					</div>

					<!--tabWrap-->
					<div class="tabWrap">
						<ul class="tabLoding"></ul>
						<!--tabList-->
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>

						</ul>
						<ul class="tabLoding"></ul>
					</div>

				</div>
							
				<div class="tab">
					<!--tab头-->
					<div class="tabHead">
						<span>MV首播</span>
						<a href="javascript:;">更多&gt;</a>
					</div>
					<!--tabNav-->
					<div class="tabNav">
						<span class="smallGreen"></span>
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>

					</div>

					<!--tabWrap-->
					<div class="tabWrap">
						<ul class="tabLoding"></ul>
						<!--tabList-->
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>

						</ul>
						<ul class="tabLoding"></ul>
					</div>

				</div>
								
				<div class="tab">
					<!--tab头-->
					<div class="tabHead">
						<span>MV首播</span>
						<a href="javascript:;">更多&gt;</a>
					</div>
					<!--tabNav-->
					<div class="tabNav">
						<span class="smallGreen"></span>
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>

					</div>

					<!--tabWrap-->
					<div class="tabWrap">
						<ul class="tabLoding"></ul>
						<!--tabList-->
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>

						</ul>
						<ul class="tabLoding"></ul>
					</div>

				</div>
				
				<div class="tab">
					<!--tab头-->
					<div class="tabHead">
						<span>MV首播</span>
						<a href="javascript:;">更多&gt;</a>
					</div>
					<!--tabNav-->
					<div class="tabNav">
						<span class="smallGreen"></span>
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>

					</div>

					<!--tabWrap-->
					<div class="tabWrap">
						<ul class="tabLoding"></ul>
						<!--tabList-->
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>

						</ul>
						<ul class="tabLoding"></ul>
					</div>

				</div>
				
				<div class="tab">
					<!--tab头-->
					<div class="tabHead">
						<span>MV首播</span>
						<a href="javascript:;">更多&gt;</a>
					</div>
					<!--tabNav-->
					<div class="tabNav">
						<span class="smallGreen"></span>
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>

					</div>

					<!--tabWrap-->
					<div class="tabWrap">
						<ul class="tabLoding"></ul>
						<!--tabList-->
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9167</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>6</span>
									</div>
								</div>
							</li>

						</ul>
						<ul class="tabLoding"></ul>
					</div>

				</div>
			</div>
			</div>
		</div>
		<div id="scrollBar"></div>
	</body>
	<script src="JS/tool.js" type="text/javascript" charset="utf-8"></script>
	<script src="JS/transform.js" type="text/javascript" charset="utf-8"></script>
	<script src="JS/drag.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		//清除默认行为
		document.addEventListener('touchstart', function(e) {
			e.preventDefault();
		})

		//点透处理  对所有a进行 监听重新设置默认行为
		var aNodes = document.querySelectorAll('a');
		for(var i = 0; i < aNodes.length; i++) {

			aNodes[i].addEventListener('touchstart', function(e) {
				e.preventDefault();
				window.location.href = this.href;
			})
		}

		//rem适配  对html font-size进行设置
		var width = document.documentElement.clientWidth;
		var styleNode = document.createElement('style');
		styleNode.innerHTML = 'html{font-size: ' + width / 16 + 'px;}';
		document.head.appendChild(styleNode);

		//把需要调用的函数都摔进去
		window.onload = function() {
			banner();
			changeColor();
			navDrag();
			focousBind();
			btnBind();
			tabBind();
			conDrag();
		}

		//竖向
		function conDrag() {
			var wrap = document.getElementById('wrap');
			var scrollBar = document.getElementById('scrollBar');
			var content = document.getElementById('content');
			var contentWrap=document.getElementById('contentWrap')

			//滚动条的高度
			var scale = document.documentElement.clientHeight / content.offsetHeight;
			scrollBar.style.height = document.documentElement.clientHeight * scale + 'px';

			var callback = {
				//touchstart
				start: function() {
					//滚动条显示
					scrollBar.style.opacity = '1';
				},
				//touchmove + 加速
				move: function() {
					//滚动条显示
					scrollBar.style.opacity = '1';
					//滚动条的移动
					//滚动条的偏移量 = 内容偏移量 *scale
					var dis = transformCss(content, 'translateY') * scale;
					transformCss(scrollBar, 'translateY', -dis)
				},
				//元素停止状态
				end: function() {
					//滚动条消失
					scrollBar.style.opacity = '0';
				}

			}

			DragContent(contentWrap, callback);
		}

		//tab选项卡
		function tabBind() {
			var tabWrap = document.querySelectorAll('#wrap #content .tab .tabWrap');
			var tabNav = document.querySelectorAll('#wrap #content .tab .tabNav');

			var startX = 0;
			var startY = 0;
			var eleX = 0;
			var eleY = 0;
			var translateX = 0;

			var isFirst = true;
			var isX = true;
			var isLoad = false;
			//小绿点index
//			var num = 0;
			//使每一个tabWrap居中，首先我们得获取nav的宽度    这种写法特别优秀，保存了i这个值到参数中   注意当一个回调函数想保存一个变量时可以放在参数中
			var width = tabNav[0].offsetWidth;

			for(var i = 0; i < tabWrap.length; i++) {
				move(tabWrap[i], tabNav[i]);
				transformCss(tabWrap[i], 'translateZ', 0.1);
			}
           
			//tab滑动逻辑
			function move(tabWrap, tabNav) {
				 tabWrap.num=0;
				transformCss(tabWrap, 'translateX', -width);

				tabWrap.addEventListener('touchstart', function(e) {
					if(isLoad) {
						return;
					}
					//清除transition
					tabWrap.style.transition = 'none';
					var touch = e.changedTouches[0];
					startX = touch.clientX;
					startY = touch.clientY;
					eleX = transformCss(tabWrap, 'translateX');

					//防抖动恢复正常
					isX = true;
					isFirst = true;

				})
				tabWrap.addEventListener('touchmove', function(e) {

					var touch = e.changedTouches[0];
					var endX = touch.clientX;
					var endY = touch.clientY;
					var disX = endX - startX;
					var disY = endY - startY;
					translateX = disX + eleX;

					//获取当前tabwrap下的loding集合
					var loads = tabWrap.querySelectorAll('.tabLoding');

					var smallGreen = tabNav.querySelector('.smallGreen');
					var tabNavs = tabNav.querySelectorAll('a');
					if(isLoad) {
						return;
					}

					//防抖动
					if(!isX) {
						return;
					}

					if(isFirst) {
						isFirst = false;

						if(Math.abs(disY) > Math.abs(disX)) {
							isX = false;
							return;
						}
					}

					//拇指拖动跟随
					transformCss(tabWrap, 'translateX', translateX);

					//当滑动超过一半   1.判断跳转 2 load图标显示 3.禁止掉load 4.小绿点跟随
					if(Math.abs(disX) > width / 2) {
						isLoad = true;
						translateX = disX < 0 ? (-2 * width) : 0;
						tabWrap.style.transition = '1s';
						transformCss(tabWrap, 'translateX', translateX);
						var a = disX > 0 ? 0 : 1;

						//设置一个过渡监听函数
						tabWrap.addEventListener('transitionend', fun);
						tabWrap.addEventListener('webkitTransitionEnd', fun);
                       
						//小绿跟随
						if(disX > 0) {
							tabWrap.num--;
							if(tabWrap.num < 0) {
								tabWrap.num = tabNavs.length - 1;
							}

						} else {
							tabWrap.num++;
						}
						console.log(tabWrap.num)
						tabWrap.num = Math.abs(tabWrap.num) % 6;
						var left = smallGreen.offsetWidth;
						smallGreen.style.left = left * tabWrap.num + 'px';

					}

					function fun() {
						loads[a].style.opacity = '1';
						//解绑
						tabWrap.removeEventListener('transitionend', fun);
						tabWrap.removeEventListener('webkitTransitionEnd', fun);

						//模拟资源取回效果   1.isLoading这个东西应该恢复 2load图隐藏  3.直接跳转回-width
						setTimeout(function() {
							tabWrap.style.transition = 'none';
							isLoad = false;
							loads[0].style.opacity = '0';
							loads[1].style.opacity = '0';

							transformCss(tabWrap, 'translateX', -width);
						}, 1000)
					}

				})

				tabWrap.addEventListener('touchend', function(e) {
					var touch = e.changedTouches[0];
					var endX = touch.clientX;
					var disX = endX - startX;

					if(isLoad) {
						return;
					}

					//手指没有划过一半的逻辑
					if(Math.abs(disX) < width / 2) {
						tabWrap.style.transition = '1s';
						transformCss(tabWrap, 'translateX', -width);
					}

				})
			}

		}

		//无缝
		function banner() {

			//获取元素
			var banWrap = document.querySelector('#wrap #content .banWrap')
			var list = document.querySelector('#wrap #content .banWrap .banList');
			transformCss(list, 'translateZ', 0.1);
			list.innerHTML += list.innerHTML;

			var liNodes = document.querySelectorAll('#wrap #content .banWrap .banList li');
			var spanNodes = document.querySelectorAll('#wrap #content .banWrap .banIcons > span');

			//布局样式区域
			var styleNode = document.createElement('style');
			styleNode.innerHTML = '#wrap #content .banWrap{height: ' + liNodes[0].offsetHeight + 'px;}';
			styleNode.innerHTML += '#wrap #content .banWrap .banList{width: ' + liNodes.length + '00%;}';
			styleNode.innerHTML += '#wrap #content .banWrap .banList li{width: ' + 100 / liNodes.length + '%;}'
			document.head.appendChild(styleNode)

			//滑屏
			//定义元素与手指初始位置
			var eleX = 0;
			var startX = 0;

			//防抖动需要变量
			var startY = 0;
			//是否是 第一次 touchmove 
			var isFirst = true;
			// 非第一次的 touchmove 是否执行
			var isX = true;

			//图片索引下标
			var now = 0;

			//定时器
			var timer = null;

			banWrap.addEventListener('touchstart', function(event) {
				//清除过渡
				list.style.transition = '0s';

				//清除定时器
				clearInterval(timer);

				//无缝
				//now == 0 , now = 5
				if(now == 0) {
					now = spanNodes.length;
				} else if(now == liNodes.length - 1) {
					//now == 9 , now = 4
					now = spanNodes.length - 1;
				};
				//真正的跳转  写入
				transformCss(list, 'translateX', -now * document.documentElement.clientWidth)

				var touch = event.changedTouches[0];
				//元素初始位置  -- 读取
				eleX = transformCss(list, 'translateX')

				//手指初始位置
				startX = touch.clientX;
				startY = touch.clientY;

				//重置：清除上一次操作结果
				isFirst = true;
				isX = true;
			});
			banWrap.addEventListener('touchmove', function(event) {
				var touch = event.changedTouches[0];

				//禁止非第一次 touchmove 逻辑
				if(!isX) {
					return;
				};

				//手指结束位置
				var endX = touch.clientX;
				var endY = touch.clientY;
				//手指距离差
				var disX = endX - startX;
				var disY = endY - startY;

				//防抖动
				// 如果是第一次 touchmove , disY > disX === 禁止水平方向逻辑 
				if(isFirst) {
					isFirst = false;
					if(Math.abs(disY) > Math.abs(disX)) {
						//禁止水平方向逻辑 ， x方向的逻辑
						isX = false;

						return; //第一次 touchmove,水平方向逻辑

					};

				}

				//确定滑动时元素最终位置 -- 写入
				transformCss(list, 'translateX', disX + eleX)

			});
			//跳转动作
			banWrap.addEventListener('touchend', function() {
				//过渡

				//list 元素 的 left值  -- 读取
				var left = transformCss(list, 'translateX')

				now = Math.round(-left / document.documentElement.clientWidth);
				//范围限定   由于left获取的是start中更新后的，已经不存在边界情况，所以无需再判断
				//				if(now < 0) {
				//					now = 0
				//				} else if(now > liNodes.length - 1) {
				//					now = liNodes.length - 1
				//				}

				//最终元素位置left = now * 屏幕宽
				list.style.transition = '2s';
				transformCss(list, 'translateX', -now * document.documentElement.clientWidth);
				//				

				//小圆点  				
				//1.统一给所有span元素添加 class = ''
				for(var i = 0; i < spanNodes.length; i++) {
					spanNodes[i].className = ''
				};
				//2.切换到谁，谁对应的class = 'active'	
				spanNodes[now % spanNodes.length].className = 'active'

				//开启定时器
				//								auto();

			});

			//自动轮播
			//						auto();
			function auto() {

				timer = setInterval(function() {
					//无缝
					// now == 9 , now = 4
					if(now == 9) {
						now = 4;
						//清除过渡
						list.style.transition = 'none';
						//真正的跳转动作
						transformCss(list, 'translateX', -now * document.documentElement.clientWidth)
					}

					setTimeout(function() {
						now++;
						//过渡
						list.style.transition = '0.5s';
						//写入
						transformCss(list, 'translateX', -now * document.documentElement.clientWidth)

						//小圆点  				
						//1.统一给所有span元素添加 class = ''
						for(var i = 0; i < spanNodes.length; i++) {
							spanNodes[i].className = ''
						};
						//2.切换到谁，谁对应的class = 'active'
						spanNodes[now % spanNodes.length].className = 'active'
					}, 20)

				}, 1000)

			}

		};

		//导航点击变色逻辑		
		function changeColor() {
			var lis = document.querySelectorAll('#wrap #content .navWrap .navList li');
			var flag = true;
			for(var i = 0; i < lis.length; i++) {
				//当我移动过就不执行
				lis[i].addEventListener('touchmove', function() {
					flag = false;
				})

				lis[i].addEventListener('touchend', function() {
					if(flag) {
						//清除
						for(var i = 0; i < lis.length; i++) {
							lis[i].className = '';
						}
						//设置
						this.className = 'active';
					}
					flag = true;
				})

			}
			//			flag=true;
		}

		//导航拖拽逻辑		
		function navDrag() {
			var navWrap = document.querySelector('#wrap #content .navWrap');
			var navList = document.querySelector('#wrap #content .navWrap .navList');
			transformCss(navList, 'translateZ', 0.1);
			var startX = 0;
			var eleX = 0;
			var translateX = 0;

			//速度
			//加速
			var s1 = 0;
			var t1 = 0;
			var s2 = 0;
			var t2 = 0;
			var disValue = 0;
			var disTime = 1; //非0数字

			navWrap.addEventListener('touchstart', function(e) {
				//过渡时间清空   speed清空
				navList.style.transition = '0s';
				var touch = e.changedTouches[0];
				//鼠标初始位置
				startX = touch.clientX;
				//读取初始位置
				eleX = transformCss(navList, 'translateX');

				//加速元素初始位置 与 初始时间
				s1 = eleX;
				t1 = new Date().getTime(); // 毫秒

				//清除上一次 disValue 
				//				disValue = 0;

			})

			//手指移动  内部逻辑包括 1.左右拉不动逻辑
			navWrap.addEventListener('touchmove', function(e) {
				var touch = e.changedTouches[0];

				var endX = touch.clientX;
				console.log(endX);
				var disX = endX - startX;
				translateX = disX + eleX;

				//反比例函数  scale=1-留白/width

				//左边 
				if(translateX > 0) {
					var scale = 0.6 - translateX / (document.documentElement.clientWidth * 3);
					//新的 translateX = 临界值 + 新的左边区域的留白
					translateX = scale * translateX;

				} else if(translateX < document.documentElement.clientWidth - navList.offsetWidth) {
					//右留白
					var a = -1 * translateX - (navList.offsetWidth - document.documentElement.clientWidth);
					var scale = 0.6 - a / (document.documentElement.clientWidth * 3);
					//新的translateX = -（新的右边区域留白+临界值）
					translateX = -1 * scale * a - navList.offsetWidth + document.documentElement.clientWidth;

				}

				//设置位置
				transformCss(navList, 'translateX', translateX);

			})

			//手指松开
			navWrap.addEventListener('touchend', function() {
				//加速 元素结束位置 与 结束时间
				s2 = translateX;
				t2 = new Date().getTime();
				//速度  在原来运动 位置的基础上再他妈加100*speed  speed当前可以通过鼠标移动速度控制
				disValue = s2 - s1;
				disTime = t2 - t1;
				var speed = disValue / disTime;

				translateX = translateX + speed * 100;

				//回弹
				//cubic-bezier(.14,1.72,.87,1.46) 
				var bezier = '';

				if(translateX > 0) {
					translateX = 0
					bezier = 'cubic-bezier(.14,1.72,.87,1.46)'
				} else if(translateX < document.documentElement.clientWidth - navList.offsetWidth) {
					translateX = document.documentElement.clientWidth - navList.offsetWidth
					bezier = 'cubic-bezier(.14,1.72,.87,1.46)'
				}
				navList.style.transition = '1s ' + bezier;
				transformCss(navList, 'translateX', translateX);

				//				speed=0;
			})
		}

		//聚焦		
		function focousBind() {
			var inputNode = document.querySelector("#wrap #head .search input[type='text']");
			inputNode.addEventListener('touchstart', function(e) {
				//获取焦点
				inputNode.focus();
				//阻止冒泡
				e.stopPropagation();
				e.preventDefault();
			})

			document.addEventListener('touchstart', function() {
				inputNode.blur();
			})
		}

		//点击按钮逻辑		
		function btnBind() {

			var menuBtn = document.querySelector('#wrap #head .headTop .menuBtn')
			var mask = document.querySelector('#wrap #head .mask')
			var flag = true;

			//点击菜单按钮  
			menuBtn.addEventListener('touchstart', function(e) {
				e.stopPropagation();
				if(flag) {
					removeClass(menuBtn, 'close');
					addClass(menuBtn, 'open');
					mask.style.display = 'block';

				} else {
					removeClass(menuBtn, 'open')
					addClass(menuBtn, 'close')
					mask.style.display = 'none'
				}
				flag = !flag;
				e.preventDefault();
			})

			//点击其他位置隐藏mask
			document.addEventListener('touchstart', function() {
				if(!flag) {
					mask.style.display = 'none';
					removeClass(menuBtn, 'open')
					addClass(menuBtn, 'close')
					flag = !flag;

				}
			})
			mask.addEventListener('touchstart', function(e) {
				e.stopPropagation();
				e.preventDefault();
			})
		}
	</script>

</html>